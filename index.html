<!DOCTYPE html>
<html>
<head>
  <title>–ú–æ–∑–∞–∏–∫–∞ —Å –ø–æ–¥–ª–æ–∂–∫–æ–π</title>
  <style>
    body { 
      margin: 0; 
      font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif; 
      background: #f0f0f0; 
    }
    canvas { 
      display: block; 
      cursor: pointer; 
      background: #f9f5e8; 
    }
    .tools { 
      padding: 8px 12px; 
      background: #fff; 
      box-shadow: 0 2px 10px rgba(0,0,0,0.08); 
      display: flex; 
      flex-wrap: wrap; 
      align-items: center; 
      gap: 8px;
    }
    button, input, label { 
      margin: 0;
      font-family: inherit; 
      font-size: 13px;
    }
    button {
      padding: 6px 12px;
      background: #f5f5f5;
      border: 1px solid #ddd;
      border-radius: 4px;
      color: #333;
      cursor: pointer;
      transition: all 0.2s;
    }
    button:hover {
      background: #e9e9e9;
      border-color: #ccc;
    }
    button:active {
      background: #ddd;
    }
    input[type="range"] {
      width: 80px;
    }
    input[type="color"] {
      width: 24px;
      height: 24px;
      padding: 2px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    #contextMenu, #shapeContextMenu { 
      position: fixed; 
      display: none; 
      background: rgba(255, 255, 255, 0.98); 
      border: none;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 100;
      backdrop-filter: blur(5px);
      min-width: 200px;
      padding: 5px 0;
    }
    #contextMenu button, #shapeContextMenu button { 
      display: block; 
      width: 100%; 
      padding: 8px 16px; 
      border: none; 
      background: none; 
      text-align: left;
      font-family: 'Segoe UI', Roboto, sans-serif;
      font-size: 14px;
      color: #333;
      cursor: pointer;
      transition: all 0.2s;
    }
    #contextMenu button:hover, #shapeContextMenu button:hover { 
      background: rgba(0, 0, 0, 0.05); 
    }
    .tool-group {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      border-radius: 6px;
      background: #f8f8f8;
      border: 1px solid #e0e0e0;
    }
    .tool-group.compact {
      padding: 4px 8px;
    }
    .tool-group.vertical {
      flex-direction: column;
      align-items: flex-start;
    }
    .tool-label {
      font-size: 12px;
      color: #666;
      white-space: nowrap;
    }
    .shape-type {
      font-weight: 500;
      color: #555;
      margin-right: 8px;
    }
    .icon-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      padding: 0;
    }
    .separator {
      width: 1px;
      height: 24px;
      background: #e0e0e0;
      margin: 0 4px;
    }
  </style>
</head>
<body>
  <div class="tools">
    <!-- –ì—Ä—É–ø–ø–∞ –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="tool-group compact">
      <input type="file" id="imageUpload" accept="image/*" style="display: none;">
      <button id="uploadBtn" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">üìÅ</button>
    </div>
    
    <!-- –ì—Ä—É–ø–ø–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ -->
    <div class="tool-group vertical">
      <div style="display: flex; align-items: center; gap: 8px;">
        <span class="tool-label">–ò–∑–æ–±—Ä.</span>
        <input type="range" id="imageOpacity" min="0" max="100" value="100">
      </div>
      <div style="display: flex; align-items: center; gap: 8px;">
        <span class="tool-label">–ú–æ–∑–∞–∏–∫–∞</span>
        <input type="range" id="mosaicOpacity" min="0" max="100" value="100">
      </div>
    </div>
    
    <!-- –ì—Ä—É–ø–ø–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ -->
    <div class="tool-group compact">
      <button id="symmetry" title="–í–∫–ª—é—á–∏—Ç—å —Å–∏–º–º–µ—Ç—Ä–∏—é">üîÑ</button>
      <span class="tool-label">–†–∞–∑–º–µ—Ä:</span>
      <input type="range" id="shapeSize" min="20" max="100" value="40" style="width: 70px;">
    </div>
    
    <!-- –ì—Ä—É–ø–ø–∞ —Å—Ç–∏–ª–µ–π -->
    <div class="tool-group compact">
      <input type="color" id="strokeColor" value="#666666" title="–¶–≤–µ—Ç –æ–±–≤–æ–¥–∫–∏">
      <span class="tool-label">–¢–æ–ª—â.:</span>
      <input type="range" id="strokeWidth" min="1" max="5" value="1" style="width: 50px;">
    </div>
    
    <div class="separator"></div>
    
    <!-- –ì—Ä—É–ø–ø–∞ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="tool-group compact">
      <button id="deleteSelected" title="–£–¥–∞–ª–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ (Del)" class="icon-button">üóëÔ∏è</button>
      <button id="undoBtn" title="–û—Ç–º–µ–Ω–∏—Ç—å (Ctrl+Z)" class="icon-button">‚Ü©Ô∏è</button>
      <button id="redoBtn" title="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å (Ctrl+Y)" class="icon-button">‚Ü™Ô∏è</button>
    </div>
    
    <div class="separator"></div>
    
    <!-- –ì—Ä—É–ø–ø–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
    <div class="tool-group compact">
      <button id="saveSVG" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å SVG">SVG</button>
      <button id="savePNG" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å PNG">PNG</button>
    </div>
  </div>
  
  <div id="contextMenu">
    <button id="addTriangle"><span class="shape-type">‚ñ≤</span>–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫</button>
    <button id="addSquare"><span class="shape-type">‚ñ†</span>–î–æ–±–∞–≤–∏—Ç—å –∫–≤–∞–¥—Ä–∞—Ç</button>
    <button id="addHexagon"><span class="shape-type">‚¨¢</span>–î–æ–±–∞–≤–∏—Ç—å —à–µ—Å—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫</button>
  </div>
  
  <div id="shapeContextMenu">
    <button id="splitIntoTriangles"><span class="shape-type">üî∫</span>–†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏</button>
  </div>
  
  <canvas id="canvas"></canvas>
  <script>
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
    document.getElementById('uploadBtn').addEventListener('click', function() {
      document.getElementById('imageUpload').click();
    });
  </script>
  <script src="script.js"></script>
</body>
</html>